import{r as a}from"./index.YZ_XhM9s.js";let r=[],s=0;const o=4;let h=i=>{let n=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(t){return e.lc=n.push(t),()=>{for(let u=s+o;u<r.length;)r[u]===t?r.splice(u,o):u+=o;let l=n.indexOf(t);~l&&(n.splice(l,1),--e.lc||e.off())}},notify(t,l){let u=!r.length;for(let f of n)r.push(f,e.value,t,l);if(u){for(s=0;s<r.length;s+=o)r[s](r[s+1],r[s+2],r[s+3]);r.length=0}},off(){},set(t){let l=e.value;l!==t&&(e.value=t,e.notify(l))},subscribe(t){let l=e.listen(t);return t(e.value),l},value:i};return e};function p(i,n,e){let t=new Set([...n,void 0]);return i.listen((l,u,f)=>{t.has(f)&&e(l,u,f)})}let c=(i,n)=>e=>{i.current=e,n()};function S(i,{keys:n,deps:e=[i,n]}={}){let t=a.useRef();t.current=i.get();let l=a.useCallback(f=>n?.length>0?p(i,n,c(t,f)):i.listen(c(t,f)),e),u=()=>t.current;return a.useSyncExternalStore(l,u,u)}export{h as a,S as u};
