import{j as e}from"./jsx-runtime.CdUEbdov.js";import{d as i}from"./firebase.J1YtV1My.js";import{r as l,a as b,q as P,l as y,o as D,b as E}from"./index.esm2017.enH01Utu.js";import{r as u}from"./index.YZ_XhM9s.js";import{J as r}from"./_astro-entry_sonner.BrdQ6kbN.js";import"./index.CTAGWh-w.js";function C(){const[o,m]=u.useState([]),h=async s=>{try{const t=l(i,`products/${s.replace(".",",")}`);await b(t),r.dismiss(),r.success("Product deleted successfully")}catch{r.dismiss(),r.error("Error deleting product")}},x=()=>{const s=l(i,"products"),t=P(s,D("createAt"),y(10));return new Promise((p,d)=>{E(t,c=>{const n=c.val();if(n){const a=Object.values(n).sort((j,f)=>f.createAt-j.createAt);m(a),p(a)}else d("No se encontraron productos")},c=>{d(c)})})};return u.useEffect(()=>{x()},[]),o.length>0?e.jsxs("table",{className:"excel-table br-10 o-hidden mx-auto mt-4 sd-3",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Stock"}),e.jsx("th",{children:"Delete"})]})}),e.jsx("tbody",{children:o?.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:s?.name}),e.jsx("td",{children:s?.price}),e.jsx("td",{children:s?.stock}),e.jsx("td",{className:"td-delete pointer",onClick:()=>h(s?.name),children:"Delete"})]},t))})]}):e.jsx("p",{children:"Loading..."})}export{C as default};
