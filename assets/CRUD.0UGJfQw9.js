import{j as e}from"./jsx-runtime.CdUEbdov.js";import{L as b}from"./Loading.CtAIUNYt.js";import{d as n}from"./firebase.J1YtV1My.js";import{r as l,a as P,q as y,l as g,o as k,b as D}from"./index.esm2017.enH01Utu.js";import{r as i}from"./index.YZ_XhM9s.js";import{J as m}from"./_astro-entry_sonner.BrdQ6kbN.js";/* empty css                       */import"./index.CTAGWh-w.js";function R(){const[o,u]=i.useState([]),h=async t=>{try{const r=l(n,`products/${t.replace(".",",")}`);await P(r),m.success("Product deleted successfully")}catch{m.error("Error deleting product")}},x=()=>{const t=l(n,"products"),r=y(t,k("createAt"),g(10));return new Promise((p,c)=>{D(r,s=>{const a=s.val();if(a){const d=Object.values(a).sort((j,f)=>f.createAt-j.createAt);u(d),p(d)}else c("No se encontraron productos")},s=>{c(s)})})};return i.useEffect(()=>{x()},[]),o.length>0?e.jsxs("table",{className:"excel-table br-10 o-hidden w-100 sd-3",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Stock"}),e.jsx("th",{children:"Delete"})]})}),e.jsx("tbody",{children:o?.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:t?.name}),e.jsx("td",{children:t?.price}),e.jsx("td",{children:t?.stock}),e.jsx("td",{className:"td-delete pointer",onClick:()=>h(t?.name),children:"Delete"})]},r))})]}):e.jsx(b,{styleParent:{scale:"0.45",marginBottom:20},line:{strokeWidth:8}})}export{R as default};
