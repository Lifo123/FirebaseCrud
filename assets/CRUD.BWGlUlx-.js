import{j as e}from"./jsx-runtime.CdUEbdov.js";import{r as i,d as l,a as b,q as P,l as y,o as v,b as E}from"./firebase.Dkp7b64R.js";import{r as h}from"./index.YZ_XhM9s.js";import{J as r}from"./_astro-entry_sonner.BrdQ6kbN.js";import"./index.CTAGWh-w.js";function q(){const[d,u]=h.useState([]),m=async s=>{try{const t=i(l,`products/${s}`);await b(t),r.dismiss(),r.success("Product deleted successfully")}catch{r.dismiss(),r.error("Error deleting product")}},x=()=>{const s=i(l,"products"),t=P(s,v("createAt"),y(10));return new Promise((j,o)=>{E(t,c=>{const n=c.val();if(n){const a=Object.values(n).sort((p,f)=>f.createAt-p.createAt);u(a),j(a)}else o("No se encontraron productos")},c=>{o(c)})})};return h.useEffect(()=>{x()},[]),d.length>0?e.jsxs("table",{className:"excel-table br-10 o-hidden mx-auto mt-4 sd-3",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Stock"}),e.jsx("th",{children:"Edit"}),e.jsx("th",{children:"Save"}),e.jsx("th",{children:"Delete"})]})}),e.jsx("tbody",{children:d?.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:s?.name}),e.jsx("td",{children:s?.price}),e.jsx("td",{children:s?.stock}),e.jsx("td",{className:"td-edit pointer",children:"Edit"}),e.jsx("td",{className:"td-save pointer",children:"Save"}),e.jsx("td",{className:"td-delete pointer",onClick:()=>m(s?.name),children:"Delete"})]},t))})]}):e.jsx("p",{children:"Loading..."})}export{q as default};
