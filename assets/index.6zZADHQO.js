import{r as a}from"./index.YZ_XhM9s.js";let s=[],i=0;const f=4;let S=u=>{let n=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(t){return e.lc=n.push(t),()=>{for(let r=i+f;r<s.length;)s[r]===t?s.splice(r,f):r+=f;let l=n.indexOf(t);~l&&(n.splice(l,1),--e.lc||e.off())}},notify(t,l){let r=!s.length;for(let o of n)s.push(o,e.value,t,l);if(r){for(i=0;i<s.length;i+=f)s[i](s[i+1],s[i+2],s[i+3]);s.length=0}},off(){},set(t){let l=e.value;l!==t&&(e.value=t,e.notify(l))},subscribe(t){let l=e.listen(t);return t(e.value),l},value:u};return e};function g(u,n,e){let t=new Set([...n,void 0]);return u.listen((l,r,o)=>{t.has(o)&&e(l,r,o)})}const d=typeof window<"u",E=S(d?localStorage.getItem("DMstate")==="true":!1),h=S(d?JSON.parse(localStorage.getItem("F-User")||""):{});let c=(u,n)=>e=>{u.current=e,n()};function m(u,{keys:n,deps:e=[u,n]}={}){let t=a.useRef();t.current=u.get();let l=a.useCallback(o=>n?.length>0?g(u,n,c(t,o)):u.listen(c(t,o)),e),r=()=>t.current;return a.useSyncExternalStore(l,r,r)}export{E as D,h as U,m as u};
