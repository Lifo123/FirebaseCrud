import{j as n}from"./jsx-runtime.CdUEbdov.js";import{r as u}from"./index.YZ_XhM9s.js";import{J as a}from"./_astro-entry_sonner.BrdQ6kbN.js";import{d}from"./firebase.J1YtV1My.js";import{r as l,g as i,s as m}from"./index.esm2017.enH01Utu.js";import"./index.CTAGWh-w.js";function h(){const s=async()=>{let e=o();if(e[0].value===""||e[1].value===""||e[2].value===""){a.error("Please fill all the fields");return}try{const t=l(d,`products/${e[0].value.replace(".",",")}`),r=await i(t);if(await m(t,{name:e[0].value,price:Number(e[1].value),stock:Number(e[2].value),createAt:new Date().getTime()}),e.forEach(c=>{c.value=""}),r.exists()){a.success("Product Updated",{duration:1e3});return}a.success("Product added successfully")}catch{a.error("Error adding product");return}},o=()=>{const e=document.querySelector('[name="name"]'),t=document.querySelector('[name="price"]'),r=document.querySelector('[name="stock"]');return[e,t,r]};return u.useEffect(()=>{o().forEach(t=>{t?.addEventListener("keydown",r=>{r.key==="Enter"&&s()})})},[]),n.jsx("span",{className:"btn f-row btn-blue br-6 w-max mt-2 f-justify-self-end",onClick:s,children:"Add Product"})}export{h as default};
