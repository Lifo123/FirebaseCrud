import{j as n}from"./jsx-runtime.CdUEbdov.js";import{r as u}from"./index.YZ_XhM9s.js";import{J as t}from"./_astro-entry_sonner.BrdQ6kbN.js";import{d}from"./firebase.J1YtV1My.js";import{r as i,g as m,s as l}from"./index.esm2017.enH01Utu.js";import"./index.CTAGWh-w.js";function h(){const a=async()=>{let e=o();if(e[0].value===""||e[1].value===""||e[2].value===""){t.dismiss(),t.error("Please fill all the fields");return}try{const r=i(d,`products/${e[0].value.replace(".",",")}`),s=await m(r);if(await l(r,{name:e[0].value,price:Number(e[1].value),stock:Number(e[2].value),createAt:new Date().getTime()}),e.forEach(c=>{c.value=""}),s.exists()){t.dismiss(),t.success("Product Updated",{duration:1e3});return}}catch{t.dismiss(),t.error("Error adding product");return}t.dismiss(),t.success("Product added successfully")},o=()=>{const e=document.querySelector('[name="name"]'),r=document.querySelector('[name="price"]'),s=document.querySelector('[name="stock"]');return[e,r,s]};return u.useEffect(()=>{o().forEach(r=>{r?.addEventListener("keydown",s=>{s.key==="Enter"&&a()})})},[]),n.jsx("span",{className:"btn f-row btn-blue br-6 w-max mt-2 f-justify-self-end",onClick:a,children:"Add Product"})}export{h as default};
